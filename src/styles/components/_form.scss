// src/styles/components/_form.scss

// ğŸ“ è¡¨å•ç»„ä»¶æ ·å¼
// æ­¤æ–‡ä»¶åŒ…å«æ‰€æœ‰è¡¨å•ç›¸å…³ç»„ä»¶çš„æ ·å¼å®šä¹‰
// ä¸Element Plusç»„ä»¶æ·±åº¦é›†æˆï¼Œç¡®ä¿ä¸»é¢˜ä¸€è‡´æ€§

@use '@/styles/variables/_index.scss' as *;

// ==================== Element Plus Form Item æ ·å¼è®¾ç½® ====================

.el-form-item {
  margin-bottom: var(--spacing-5);

  // æ ‡ç­¾æ ·å¼
  :deep(.el-form-item__label) {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-2);
    line-height: var(--line-height-normal);

    // å¿…éœ€å­—æ®µæ˜Ÿå·æ ·å¼
    &::before {
      color: var(--color-danger);
      margin-right: var(--spacing-1);
    }
  }

  // å†…å®¹åŒºåŸŸ
  :deep(.el-form-item__content) {
    line-height: var(--line-height-normal);

    // è¾“å…¥æ¡†æ ·å¼ - æ ¸å¿ƒå˜åŠ¨ï¼šç¡®ä¿ä¸»é¢˜é€‚é…
    .el-input,
    .el-select,
    .el-textarea {
      .el-input__wrapper {
        background-color: var(--color-bg-container);
        border: 1px solid var(--color-border-base);
        border-radius: var(--border-radius-base);
        box-shadow: var(--box-shadow-sm);
        transition: all 0.2s ease-in-out;

        // å˜åŠ¨ï¼šæ‚¬åœçŠ¶æ€ä½¿ç”¨ä¸»è‰²
        &:hover {
          border-color: var(--color-primary);
          box-shadow: var(--box-shadow-base);
        }

        // å˜åŠ¨ï¼šèšç„¦çŠ¶æ€ä½¿ç”¨ä¸»è‰²é˜´å½±
        &.is-focus {
          border-color: var(--color-primary);
          box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
        }
      }

      // è¾“å…¥æ¡†æ–‡æœ¬ - ç¡®ä¿æ–‡æœ¬é¢œè‰²æ­£ç¡®
      .el-input__inner {
        color: var(--color-text-primary);
        font-size: var(--font-size-sm);

        &::placeholder {
          color: var(--color-text-secondary);
        }
      }

      // å˜åŠ¨ï¼šå›¾æ ‡é¢œè‰²é€‚é…ä¸»é¢˜
      .el-input__prefix,
      .el-input__suffix {
        .el-icon {
          color: var(--color-text-secondary);
        }
      }
    }
  }

  // é”™è¯¯çŠ¶æ€ - ä½¿ç”¨å±é™©è‰²
  &.is-error {
    :deep(.el-form-item__label) {
      color: var(--color-danger);
    }

    :deep(.el-input__wrapper) {
      border-color: var(--color-danger);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-danger) 20%, transparent);
    }

    :deep(.el-form-item__error) {
      color: var(--color-danger);
      font-size: var(--font-size-xs);
      margin-top: var(--spacing-1);
      line-height: var(--line-height-tight);
    }
  }

  // æˆåŠŸçŠ¶æ€
  &.is-success {
    :deep(.el-input__wrapper) {
      border-color: var(--color-success);
    }
  }

  // ç¦ç”¨çŠ¶æ€
  &.is-disabled {
    :deep(.el-form-item__label) {
      color: var(--color-text-disabled);
    }

    :deep(.el-input__wrapper) {
      background-color: var(--color-disabled);
      border-color: var(--color-border-light);

      .el-input__inner {
        color: var(--color-text-disabled);
      }
    }
  }
}

// ==================== è¡¨å•é¡¹å°ºå¯¸å˜ä½“ ====================

.el-form-item--small {
  margin-bottom: var(--spacing-3);

  :deep(.el-form-item__label) {
    font-size: var(--font-size-xs);
  }

  :deep(.el-input__inner) {
    font-size: var(--font-size-xs);
  }
}

.el-form-item--large {
  margin-bottom: var(--spacing-6);

  :deep(.el-form-item__label) {
    font-size: var(--font-size-base);
  }

  :deep(.el-input__inner) {
    font-size: var(--font-size-base);
  }
}

// ==================== æ ‡ç­¾ä½ç½®å˜ä½“ ====================

.el-form--label-top {
  .el-form-item {
    :deep(.el-form-item__label) {
      display: block;
      width: 100%;
      text-align: left;
      padding-bottom: var(--spacing-2);
    }
  }
}

.el-form--label-left {
  .el-form-item {
    :deep(.el-form-item__label) {
      text-align: left;
      justify-content: flex-start;
    }
  }
}

.el-form--label-right {
  .el-form-item {
    :deep(.el-form-item__label) {
      text-align: right;
      justify-content: flex-end;
    }
  }
}

// ==================== å†…è”è¡¨å• ====================

.el-form--inline {
  .el-form-item {
    display: inline-flex;
    margin-right: var(--spacing-4);
    margin-bottom: var(--spacing-4);
    vertical-align: top;

    :deep(.el-form-item__content) {
      display: inline-flex;
    }
  }
}

// ==================== è‡ªå®šä¹‰è¡¨å•æ§ä»¶ï¼ˆä¸ç°æœ‰æ ·å¼é›†æˆï¼‰ ====================

.form-control {
  display: block;
  width: 100%;
  padding: var(--spacing-2) var(--spacing-3);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  background-color: var(--color-bg-container);
  border: 1px solid var(--color-border-base);
  border-radius: var(--border-radius-base);
  transition: all 0.2s ease-in-out;

  &::placeholder {
    color: var(--color-text-secondary);
  }

  // å˜åŠ¨ï¼šèšç„¦çŠ¶æ€ä½¿ç”¨ä¸»è‰²
  &:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
  }

  &:disabled {
    background-color: var(--color-disabled);
    color: var(--color-text-disabled);
    cursor: not-allowed;
  }
}

/* è¾“å…¥æ¡†å°ºå¯¸ */
.form-control-sm {
  padding: var(--spacing-1) var(--spacing-2);
  font-size: var(--font-size-xs);
}

.form-control-lg {
  padding: var(--spacing-3) var(--spacing-4);
  font-size: var(--font-size-base);
}

/* ä¸‹æ‹‰é€‰æ‹©å™¨ */
.select-control {
  @extend .form-control;
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,<svg fill='%23aaa' viewBox='0 0 20 20'><path d='M5.25 7.5L10 12.25L14.75 7.5H5.25Z'/></svg>");
  background-repeat: no-repeat;
  background-position: right var(--spacing-2) center;
  background-size: 1rem;
}

/* è¡¨å•åˆ†ç»„ */
.form-group {
  margin-bottom: var(--spacing-4);

  label {
    display: block;
    margin-bottom: var(--spacing-2);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
  }
}

/* æ ¡éªŒçŠ¶æ€ - ä½¿ç”¨è¯­ä¹‰è‰² */
.form-control.is-valid {
  border-color: var(--color-success);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-success) 20%, transparent);
}

.form-control.is-invalid {
  border-color: var(--color-danger);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-danger) 20%, transparent);
}

// ==================== å“åº”å¼è®¾è®¡ ====================

@media (max-width: 768px) {
  .el-form-item {
    margin-bottom: var(--spacing-4);
  }

  .el-form--inline {
    .el-form-item {
      display: block;
      margin-right: 0;
      width: 100%;
    }
  }
}

// ==================== ç™»å½•è¡¨å•ç‰¹å®šæ ·å¼ ====================

// ç™»å½•é¡µé¢è¡¨å•ç‰¹æ®Šå¤„ç†
.login-form {
  .el-form-item {
    // ç™»å½•è¡¨å•é¡¹çš„ç‰¹æ®Šè¾¹è·
    margin-bottom: var(--spacing-5);

    // ç™»å½•è¾“å…¥æ¡†çš„ç‰¹æ®Šæ ·å¼
    :deep(.el-input__wrapper) {
      background: var(--color-bg-container);
      border: 1px solid var(--color-border-base);

      // å˜åŠ¨ï¼šç¡®ä¿ç™»å½•é¡µè¾“å…¥æ¡†åœ¨æš—é»‘æ¨¡å¼ä¸‹æ­£ç¡®æ˜¾ç¤º
      &:hover,
      &.is-focus {
        border-color: var(--color-primary);
      }
    }
  }
}

// ==================== æš—é»‘æ¨¡å¼ç‰¹å®šè°ƒæ•´ ====================

// æš—é»‘æ¨¡å¼ä¸‹çš„è¡¨å•ç‰¹æ®Šå¤„ç†
[data-theme='dark'] {
  .el-form-item {
    :deep(.el-input__wrapper) {
      background: var(--color-bg-container);
      border-color: var(--color-border-base);

      .el-input__inner {
        color: var(--color-text-primary);
      }
    }
  }

  .form-control {
    background: var(--color-bg-container);
    border-color: var(--color-border-base);
    color: var(--color-text-primary);

    &::placeholder {
      color: var(--color-text-secondary);
    }
  }
}
