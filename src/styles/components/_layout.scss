// src/styles/components/_layout.scss
@use '@/styles/variables/_index.scss' as *;

// 1.基础布局
.layout {
  height: 100vh;
  position: relative;
  background-color: var(--color-bg-body);
  color: var(--color-text-primary);
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

// 2.侧边栏基础样式
.layout-aside {
  /*  新增：侧边栏渐变背景 */
  background: linear-gradient(
    180deg,
    var(--color-aside-gradient) 0%,
    var(--color-bg-container) 100%
  );

  border-right: 1px solid var(--color-border-light);
  transition:
    width 0.3s ease,
    transform 0.3s ease,
    background-color 0.3s ease;
  box-shadow: var(--box-shadow-sm);
  height: 100vh;
  overflow: hidden;
  z-index: var(--zindex-sidebar);

  /* 自定义滚动条样式 */
  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  &::-webkit-scrollbar-thumb {
    background-color: var(--color-border-light);
    border-radius: 3px;
  }
  &::-webkit-scrollbar-track {
    background-color: var(--color-bg-body);
  }
}

// 3.头部基础样式
.layout-header {
  border-bottom: 1px solid var(--color-border-light);
  box-shadow: var(--box-shadow-sm);
  transition:
    background-color 0.3s ease,
    border-color 0.3s ease;

  .header-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-3);

    .el-button {
      min-width: 36px;
      height: 36px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
  }
}

// 4.主体区域
.layout-main {
  flex: 1;
  background-color: var(--color-bg-body);
  color: var(--color-text-primary);
  padding: var(--spacing-4);
  transition:
    background-color 0.3s ease,
    color 0.3s ease;

  /* 自定义滚动条样式 */
  &::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  &::-webkit-scrollbar-thumb {
    background-color: var(--color-border-light);
    border-radius: 3px;
  }
  &::-webkit-scrollbar-track {
    background-color: var(--color-bg-body);
  }
}

// 5.面包屑区域
.layout-breadcrumb {
  padding: var(--spacing-3) var(--spacing-4);
  background-color: var(--color-bg-body);
  border-bottom: 1px solid var(--color-border-light);
  margin-bottom: var(--spacing-3);
}

// 6.内容区域
.layout-content {
  background-color: var(--color-bg-container);
  border-radius: var(--border-radius-base);
  box-shadow: var(--box-shadow-sm);
  padding: var(--spacing-4);
  min-height: calc(100vh - 120px);
  transition: background-color 0.3s ease;

  /* hover 阴影效果 */
  &:hover {
    box-shadow: var(--box-shadow-md);
  }

  /* 淡入动画效果 */
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 7.标签页样式覆盖 */
.layout-tabs {
  margin-bottom: var(--spacing-3);
  background: var(--color-bg-container);
  border-radius: var(--border-radius-base);

  .el-tabs__item {
    color: var(--color-text-secondary);
    transition: color 0.3s ease;

    &.is-active {
      color: var(--color-primary);
      font-weight: var(--font-weight-semibold);
    }

    &:hover {
      color: var(--color-hover);
    }
  }

  .el-tabs__active-bar {
    background-color: var(--color-primary);
    transition: background-color 0.3s ease;
  }

  .el-tabs__nav-wrap {
    border-bottom: 1px solid var(--color-border-light);
  }
}

/* 移动端适配 */
@media screen and (max-width: 768px) {
  .layout-header {
    .header-right {
      flex-wrap: wrap;
      gap: var(--spacing-2);

      .el-button {
        min-width: 32px;
        height: 32px;
        font-size: var(--font-size-xs);
      }

      .el-color-picker {
        transform: scale(0.85);
      }
    }
  }

  .layout-aside {
    position: absolute;
    left: 0;
    top: 0;
    transform: translateX(-100%);
    width: 200px;
    z-index: 1000;
    transition: transform 0.3s ease;
  }

  .layout-aside.open {
    transform: translateX(0);
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15);
  }

  /* 遮罩层优化 */
  .layout.open::after {
    content: '';
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 999;
    opacity: 1;
    pointer-events: auto;
    transition: opacity 0.3s ease;
  }

  /* 标签页在移动端缩小字体和间距 */
  .layout-tabs .el-tabs__item {
    font-size: var(--font-size-xs);
    padding: 0 var(--spacing-2);
  }
}
